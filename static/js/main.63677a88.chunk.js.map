{"version":3,"sources":["storage/Library.js","components/Header/index.js","components/Card/index.js","components/Modal/index.js","components/Footer/index.js","pages/Home/index.js","index.js"],"names":["Book","title","author","pages","isRead","this","Library","bookshelf","bookIdEnum","addBook","newBook","id","push","initializeLibrary","localStorage","getItem","i","length","bookArr","JSON","parse","saveLibrary","clear","forEach","book","setItem","stringify","Object","values","getAllBooks","deleteBook","updatedBookshelf","filter","editBook","updatedBook","map","changeBookReadStatus","Header","Card","bookObj","setBookLibrary","setBookToEdit","toggleModal","className","onClick","htmlFor","type","name","checked","onChange","Modal","props","showModal","bookToEdit","useState","setTitle","setAuthor","setPages","readStatus","setReadStatus","hide","clearModal","useEffect","onSubmit","e","preventDefault","value","target","required","Footer","href","Home","setShowModal","bookLibrary","handleUnload","window","addEventListener","removeEventListener","key","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.63677a88.chunk.js","sourcesContent":["// ..:: Constructors\n// Book Constructor available only here\nfunction Book(title, author, pages, isRead) {\n  this.title = title;\n  this.author = author;\n  this.pages = pages;\n  this.isRead = isRead;\n}\n\n// Library module - available across the whole project wherever it is imported\nconst Library = (() => {\n  let bookshelf = [];\n  let bookIdEnum = 0;\n\n  function getAllBooks() {\n    return bookshelf;\n  }\n\n  function addBook(title, author, pages, isRead) {\n    const newBook = new Book(title, author, pages, isRead);\n    newBook.id = \"ID\" + ++bookIdEnum;\n\n    bookshelf.push(newBook);\n  }\n\n  function deleteBook(id) {\n    const updatedBookshelf = bookshelf.filter((book) => {\n      if (book.id !== id) {\n        return book;\n      }\n    });\n\n    bookshelf = updatedBookshelf;\n  }\n\n  function editBook(updatedBook) {\n    const updatedBookshelf = bookshelf.map((book) => {\n      if (book.id === updatedBook.id) {\n        const { title, author, pages, isRead } = updatedBook;\n        book.title = title;\n        book.author = author;\n        book.pages = pages;\n        book.isRead = isRead;\n      }\n\n      return book;\n    });\n\n    bookshelf = updatedBookshelf;\n  }\n\n  function changeBookReadStatus(id) {\n    const updatedBookshelf = bookshelf.map((book) => {\n      if (book.id === id) {\n        book.isRead = !book.isRead;\n      }\n\n      return book;\n    });\n\n    bookshelf = updatedBookshelf;\n  }\n\n  function initializeLibrary() {\n    if (!localStorage.getItem(\"@small-lib-react/book1\")) {\n      addBook(\"Budapeste\", \"Chico Buarque de Holanda\", 174, true);\n      addBook(\"Estorvo\", \"Chico Buarque de Holanda\", 203, false);\n      addBook(\"Pale Blue Dot\", \"Carl Sagan\", 421, true);\n    } else {\n      for (let i = 1; i <= localStorage.length; i++) {\n        let bookArr = JSON.parse(\n          localStorage.getItem(`@small-lib-react/book${i}`)\n        );\n        addBook(bookArr[0], bookArr[1], bookArr[2], bookArr[3]);\n      }\n    }\n  }\n\n  function saveLibrary() {\n    localStorage.clear();\n\n    let i = 1;\n    bookshelf.forEach((book) => {\n      localStorage.setItem(\n        `@small-lib-react/book${i}`,\n        JSON.stringify(Object.values(book))\n      );\n      i++;\n    });\n  }\n\n  return {\n    initializeLibrary,\n    saveLibrary,\n    getAllBooks,\n    addBook,\n    deleteBook,\n    editBook,\n    changeBookReadStatus,\n  };\n})();\n\nexport default Library;\n","import React from \"react\";\n\nimport \"./index.css\";\n\nfunction Header() {\n  return (\n    <header>\n      <h1>Small Library</h1>\n      <h2>\n        “I cannot remember the books I've read any more than the meals I have\n        eaten; even so, they have made me.” ― Emerson, Ralph Waldo\n      </h2>\n    </header>\n  );\n}\n\nexport default Header;\n","import React from \"react\";\n\nimport \"./index.css\";\n\nimport Library from \"../../storage/Library\";\n\nfunction Card({ bookObj, setBookLibrary, setBookToEdit, toggleModal }) {\n  const { title, author, pages, isRead, id } = bookObj;\n\n  function handleChange() {\n    Library.changeBookReadStatus(id);\n\n    setBookLibrary(Library.getAllBooks());\n  }\n\n  function handleDelete() {\n    Library.deleteBook(id);\n\n    setBookLibrary(Library.getAllBooks());\n  }\n\n  function handleEdit() {\n    setBookToEdit(bookObj);\n\n    toggleModal();\n  }\n\n  return (\n    <div className=\"card\">\n      <div className=\"card-header\">\n        <h2>{title}</h2>\n        <h3>{author}</h3>\n      </div>\n      <div className=\"card-footer\">\n        <div className=\"buttons\">\n          <button onClick={handleDelete}>delete</button>\n          <button onClick={handleEdit}>edit</button>\n        </div>\n        {pages ? <h4>{pages} pages</h4> : <p></p>}\n        <div className=\"checkbox-container\">\n          <div className=\"checkbox\">\n            <label htmlFor=\"read-checkbox\">read</label>\n            <input\n              id=\"test\"\n              type=\"checkbox\"\n              name=\"read-checkbox\"\n              checked={isRead}\n              onChange={handleChange}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Card;\n","import React, { useState, useEffect } from \"react\";\n\nimport \"./index.css\";\n\nimport Library from \"../../storage/Library\";\n\nfunction Modal(props) {\n  const {\n    showModal,\n    toggleModal,\n    setBookLibrary,\n    bookToEdit,\n    setBookToEdit,\n  } = props;\n\n  const [title, setTitle] = useState(\"\");\n  const [author, setAuthor] = useState(\"\");\n  const [pages, setPages] = useState(\"\");\n  const [readStatus, setReadStatus] = useState(false);\n\n  const hide = showModal ? \"\" : \"hide\";\n\n  useEffect(() => {\n    setTitle(bookToEdit.title);\n    setAuthor(bookToEdit.author);\n    setPages(bookToEdit.pages);\n    setReadStatus(bookToEdit.isRead);\n  }, [bookToEdit]);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    if (!bookToEdit.id) {\n      Library.addBook(title, author, pages, readStatus);\n    } else {\n      Library.editBook({\n        title,\n        author,\n        pages,\n        isRead: readStatus,\n        id: bookToEdit.id,\n      });\n    }\n\n    setBookLibrary(Library.getAllBooks());\n\n    clearModal();\n    toggleModal();\n  }\n\n  function clearModal() {\n    setBookToEdit({\n      title: \"\",\n      author: \"\",\n      pages: \"\",\n      isRead: false,\n    });\n  }\n\n  return (\n    <div id=\"modal\" className={hide}>\n      <div className=\"content\">\n        <div className=\"header\">\n          <h1>{bookToEdit.id ? \"Edit book\" : \"Add a book\"}</h1>\n          <button\n            id=\"btn-modal-close\"\n            onClick={() => {\n              clearModal();\n              toggleModal();\n            }}\n          >\n            Close\n          </button>\n        </div>\n\n        <form className=\"body\" onSubmit={handleSubmit}>\n          <label htmlFor=\"title\">Title *</label>\n          <input\n            id=\"title\"\n            value={title}\n            onChange={(e) => {\n              setTitle(e.target.value);\n            }}\n            type=\"text\"\n            name=\"title\"\n            required=\"required\"\n          />\n\n          <label htmlFor=\"author\">Author *</label>\n          <input\n            id=\"book-author\"\n            type=\"text\"\n            name=\"author\"\n            value={author}\n            onChange={(e) => setAuthor(e.target.value)}\n            required=\"required\"\n          />\n\n          <div className=\"lower\">\n            <label className=\"label-pages\" htmlFor=\"pages\">\n              # of pages\n            </label>\n            <input\n              id=\"book-pages\"\n              className=\"input-pages\"\n              type=\"number\"\n              name=\"pages\"\n              value={pages}\n              onChange={(e) => setPages(e.target.value)}\n            />\n\n            <label className=\"label-read\" htmlFor=\"read\">\n              Already read?\n            </label>\n            <input\n              className=\"input-read\"\n              id=\"book-read\"\n              type=\"checkbox\"\n              name=\"read\"\n              checked={readStatus}\n              onChange={(e) => setReadStatus(e.target.checked)}\n            />\n          </div>\n\n          <button id=\"btn-modal-add\" type=\"submit\">\n            {bookToEdit.id ? \"Edit book\" : \"Add book\"}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default Modal;\n","import React from \"react\";\n\nimport \"./index.css\";\n\nfunction Footer() {\n  return (\n    <footer>\n      <p>\n        made by <a href=\"https://github.com/pklepa\">pklepa</a> using{\" \"}\n        <a href=\"https://reactjs.org/\">React</a>\n      </p>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import React, { useState, useEffect } from \"react\";\n\nimport \"../../assets/fonts/fonts.css\";\nimport \"../../assets/styles/reset.css\";\nimport \"../../assets/styles/global.css\";\nimport \"./index.css\";\n\nimport Library from \"../../storage/Library\";\nimport Header from \"../../components/Header\";\nimport Card from \"../../components/Card\";\nimport Modal from \"../../components/Modal\";\nimport Footer from \"../../components/Footer\";\n\nfunction Home() {\n  const [showModal, setShowModal] = useState(false);\n  const [bookLibrary, setBookLibrary] = useState([]);\n  const [bookToEdit, setBookToEdit] = useState({});\n\n  function toggleModal() {\n    setShowModal(!showModal);\n  }\n\n  function handleUnload() {\n    Library.saveLibrary();\n  }\n\n  useEffect(() => {\n    Library.initializeLibrary();\n    setBookLibrary(Library.getAllBooks());\n\n    window.addEventListener(\"beforeunload\", handleUnload);\n    return () => {\n      window.removeEventListener(\"beforeunload\", handleUnload);\n    };\n  }, []);\n\n  return (\n    <div id=\"page-home\">\n      <Header />\n\n      <main>\n        <button className=\"add-book\" id=\"btn-add-form\" onClick={toggleModal}>\n          <span>add_circle</span>Add a book\n        </button>\n\n        <div className=\"cards-container\">\n          {bookLibrary.map((book) => {\n            return (\n              <Card\n                key={book.id}\n                bookObj={book}\n                setBookLibrary={setBookLibrary}\n                setBookToEdit={setBookToEdit}\n                toggleModal={toggleModal}\n              />\n            );\n          })}\n        </div>\n      </main>\n\n      <Footer />\n\n      <Modal\n        showModal={showModal}\n        toggleModal={toggleModal}\n        setBookLibrary={setBookLibrary}\n        bookToEdit={bookToEdit}\n        setBookToEdit={setBookToEdit}\n      />\n    </div>\n  );\n}\n\nexport default Home;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport Home from \"./pages/Home\";\n\nReactDOM.render(<Home />, document.getElementById(\"root\"));\n"],"sourceRoot":""}